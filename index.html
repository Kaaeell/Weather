
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Weather Forecast</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#3B82F6',
                        dark: {
                            bg: '#181818',
                            card: '#252525',
                            text: '#E1E1E1'
                        }
                    }
                },
            }
        }

        // Check for dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
</head>
<body class="bg-gray-100 dark:bg-dark-bg text-gray-800 dark:text-dark-text min-h-screen transition-colors duration-200">
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold mb-2 flex items-center justify-center">
                <i class="fas fa-cloud-sun text-primary mr-3"></i>
                Global Weather Forecast
            </h1>
            <p class="text-gray-600 dark:text-gray-400">Real-time weather forecasts for any location worldwide</p>
        </header>

        <!-- Search box -->
        <div class="bg-white dark:bg-dark-card rounded-lg shadow-md p-6 mb-8">
            <form id="search-form" class="flex flex-col md:flex-row gap-3">
                <div class="flex-grow">
                    <input 
                        type="text" 
                        id="location-input" 
                        placeholder="Enter city name (e.g., Bandung, Tokyo, Shenzen)" 
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 text-base bg-white dark:bg-dark-card dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                        autocomplete="off"
                    >
                </div>
                <button 
                    type="submit" 
                    class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-opacity-90 transition flex items-center justify-center"
                >
                    <i class="fas fa-search mr-2"></i>
                    Get Weather
                </button>
            </form>

            <div id="search-suggestions" class="mt-1 bg-white dark:bg-dark-card rounded-lg shadow-lg absolute z-10 w-[calc(100%-3rem)] md:w-[calc(100%-12rem-3rem)] max-w-3xl hidden overflow-hidden">
                <!-- Suggestions will be inserted here -->
            </div>
        </div>

        <!-- Loading indicator -->
        <div id="loading" class="text-center py-12 hidden">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>
            <p class="mt-4 text-gray-600 dark:text-gray-400">Fetching weather data...</p>
        </div>

        <!-- Error message -->
        <div id="error-message" class="bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 p-4 rounded-lg mb-8 hidden">
            <div class="flex items-start">
                <i class="fas fa-exclamation-circle mt-1 mr-3"></i>
                <div id="error-text">Unable to fetch weather data. Please try again.</div>
            </div>
        </div>

        <!-- Weather info -->
        <div id="weather-container" class="hidden">
            <!-- Current weather -->
            <div class="bg-white dark:bg-dark-card rounded-lg shadow-md p-6 mb-8">
                <div class="flex flex-col md:flex-row items-center md:items-start justify-between">
                    <div class="text-center md:text-left mb-6 md:mb-0">
                        <h2 id="location-name" class="text-2xl font-bold mb-1">--</h2>
                        <p id="current-date" class="text-gray-600 dark:text-gray-400 mb-4">--</p>
                        <div class="flex flex-col md:flex-row md:items-center">
                            <div id="current-weather-icon" class="text-6xl text-primary mb-2 md:mb-0 md:mr-4">
                                <i class="fas fa-cloud"></i>
                            </div>
                            <div>
                                <div class="flex items-center justify-center md:justify-start">
                                    <span id="current-temp" class="text-5xl font-bold">--</span>
                                    <span class="text-2xl ml-1">°C</span>
                                </div>
                                <p id="weather-description" class="text-lg text-gray-700 dark:text-gray-300">--</p>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-center">
                        <div class="bg-gray-100 dark:bg-gray-800 p-3 rounded-lg">
                            <i class="fas fa-wind text-blue-500 mb-2"></i>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Wind</p>
                            <p id="wind-speed" class="font-semibold">-- km/h</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800 p-3 rounded-lg">
                            <i class="fas fa-tint text-blue-500 mb-2"></i>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Humidity</p>
                            <p id="humidity" class="font-semibold">--%</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800 p-3 rounded-lg">
                            <i class="fas fa-eye text-blue-500 mb-2"></i>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Visibility</p>
                            <p id="visibility" class="font-semibold">-- km</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800 p-3 rounded-lg">
                            <i class="fas fa-temperature-low text-blue-500 mb-2"></i>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Min Temp</p>
                            <p id="min-temp" class="font-semibold">--°C</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800 p-3 rounded-lg">
                            <i class="fas fa-temperature-high text-blue-500 mb-2"></i>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Max Temp</p>
                            <p id="max-temp" class="font-semibold">--°C</p>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-800 p-3 rounded-lg">
                            <i class="fas fa-cloud-rain text-blue-500 mb-2"></i>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Precipitation</p>
                            <p id="precipitation" class="font-semibold">-- mm</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 7-day forecast -->
            <h3 class="text-xl font-bold mb-4">7-Day Forecast</h3>
            <div class="grid grid-cols-2 md:grid-cols-7 gap-4 mb-8" id="forecast-container">
                <!-- Forecast cards will be inserted here -->
            </div>

            <!-- Hourly forecast -->
            <h3 class="text-xl font-bold mb-4">Today's Hourly Forecast</h3>
            <div class="bg-white dark:bg-dark-card rounded-lg shadow-md p-4 mb-8 overflow-x-auto">
                <div class="flex space-x-6 min-w-max" id="hourly-forecast">
                    <!-- Hourly forecast items will be inserted here -->
                </div>
            </div>

            <!-- Weather map -->
            <div class="bg-white dark:bg-dark-card rounded-lg shadow-md p-6 mb-8">
                <h3 class="text-xl font-bold mb-4">Temperature Map</h3>
                <div id="map-container" class="h-64 md:h-80 bg-gray-200 dark:bg-gray-700 rounded-lg">
                    <div id="map-placeholder" class="w-full h-full flex items-center justify-center">
                        <p class="text-gray-500 dark:text-gray-400">Map visualization available for actual locations</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent searches and popular cities -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
            <div class="bg-white dark:bg-dark-card rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold mb-4">Your Recent Searches</h3>
                <div id="recent-searches" class="space-y-2">
                    <p class="text-gray-500 dark:text-gray-400 text-sm">Your recent search locations will appear here</p>
                </div>
            </div>
            <div class="bg-white dark:bg-dark-card rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold mb-4">Popular Cities</h3>
                <div class="grid grid-cols-2 gap-2">
                    <button class="popular-city-btn text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition" data-city="Bandung">Bandung</button>
                    <button class="popular-city-btn text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition" data-city="Tokyo">Tokyo</button>
                    <button class="popular-city-btn text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition" data-city="Shenzhen">Shenzhen</button>
                    <button class="popular-city-btn text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition" data-city="Purwakarta">Purwakarta</button>
                    <button class="popular-city-btn text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition" data-city="Singapore">Singapore</button>
                    <button class="popular-city-btn text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition" data-city="Sydney">Sydney</button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 text-center text-gray-500 dark:text-gray-400 text-sm">
            <p>Ryzxell &copy; 2025</p>
            <p class="mt-1">Powered by Open-Meteo API</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchForm = document.getElementById('search-form');
            const locationInput = document.getElementById('location-input');
            const searchSuggestions = document.getElementById('search-suggestions');
            const loadingIndicator = document.getElementById('loading');
            const errorMessage = document.getElementById('error-message');
            const errorText = document.getElementById('error-text');
            const weatherContainer = document.getElementById('weather-container');
            const locationName = document.getElementById('location-name');
            const currentDate = document.getElementById('current-date');
            const currentTemp = document.getElementById('current-temp');
            const weatherDescription = document.getElementById('weather-description');
            const currentWeatherIcon = document.getElementById('current-weather-icon');
            const windSpeed = document.getElementById('wind-speed');
            const humidity = document.getElementById('humidity');
            const visibility = document.getElementById('visibility');
            const minTemp = document.getElementById('min-temp');
            const maxTemp = document.getElementById('max-temp');
            const precipitation = document.getElementById('precipitation');
            const forecastContainer = document.getElementById('forecast-container');
            const hourlyForecast = document.getElementById('hourly-forecast');
            const recentSearchesContainer = document.getElementById('recent-searches');
            const popularCityBtns = document.querySelectorAll('.popular-city-btn');
            
            // Store recent searches in memory (would typically use localStorage, but it's not available in iframe)
            let recentSearches = [];
            
            // Weather codes mapping to icons
            const weatherIcons = {
                0: '<i class="fas fa-sun text-yellow-500"></i>', // Clear sky
                1: '<i class="fas fa-sun text-yellow-500"></i>', // Mainly clear
                2: '<i class="fas fa-cloud-sun text-yellow-400"></i>', // Partly cloudy
                3: '<i class="fas fa-cloud text-gray-400"></i>', // Overcast
                45: '<i class="fas fa-smog text-gray-500"></i>', // Fog
                48: '<i class="fas fa-smog text-gray-500"></i>', // Depositing rime fog
                51: '<i class="fas fa-cloud-rain text-blue-300"></i>', // Light drizzle
                53: '<i class="fas fa-cloud-rain text-blue-400"></i>', // Moderate drizzle
                55: '<i class="fas fa-cloud-rain text-blue-500"></i>', // Dense drizzle
                56: '<i class="fas fa-cloud-rain text-blue-300"></i>', // Light freezing drizzle
                57: '<i class="fas fa-cloud-rain text-blue-400"></i>', // Dense freezing drizzle
                61: '<i class="fas fa-cloud-rain text-blue-400"></i>', // Slight rain
                63: '<i class="fas fa-cloud-rain text-blue-500"></i>', // Moderate rain
                65: '<i class="fas fa-cloud-showers-heavy text-blue-600"></i>', // Heavy rain
                66: '<i class="fas fa-cloud-rain text-blue-400"></i>', // Light freezing rain
                67: '<i class="fas fa-cloud-rain text-blue-500"></i>', // Heavy freezing rain
                71: '<i class="fas fa-snowflake text-blue-200"></i>', // Slight snow fall
                73: '<i class="fas fa-snowflake text-blue-300"></i>', // Moderate snow fall
                75: '<i class="fas fa-snowflake text-blue-400"></i>', // Heavy snow fall
                77: '<i class="fas fa-snowflake text-blue-300"></i>', // Snow grains
                80: '<i class="fas fa-cloud-rain text-blue-400"></i>', // Slight rain showers
                81: '<i class="fas fa-cloud-rain text-blue-500"></i>', // Moderate rain showers
                82: '<i class="fas fa-cloud-showers-heavy text-blue-600"></i>', // Violent rain showers
                85: '<i class="fas fa-snowflake text-blue-300"></i>', // Slight snow showers
                86: '<i class="fas fa-snowflake text-blue-400"></i>', // Heavy snow showers
                95: '<i class="fas fa-bolt text-yellow-500"></i>', // Thunderstorm
                96: '<i class="fas fa-bolt text-yellow-500"></i>', // Thunderstorm with slight hail
                99: '<i class="fas fa-bolt text-yellow-500"></i>'  // Thunderstorm with heavy hail
            };
            
            const weatherDescriptions = {
                0: "Clear sky",
                1: "Mainly clear",
                2: "Partly cloudy",
                3: "Overcast",
                45: "Fog",
                48: "Depositing rime fog",
                51: "Light drizzle",
                53: "Moderate drizzle",
                55: "Dense drizzle",
                56: "Light freezing drizzle",
                57: "Dense freezing drizzle",
                61: "Slight rain",
                63: "Moderate rain",
                65: "Heavy rain",
                66: "Light freezing rain",
                67: "Heavy freezing rain",
                71: "Light snow fall",
                73: "Moderate snow fall",
                75: "Heavy snow fall",
                77: "Snow grains",
                80: "Slight rain showers",
                81: "Moderate rain showers",
                82: "Violent rain showers",
                85: "Slight snow showers",
                86: "Heavy snow showers",
                95: "Thunderstorm",
                96: "Thunderstorm with slight hail",
                99: "Thunderstorm with heavy hail"
            };
            
            // Format date
            function formatDate(date) {
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(date).toLocaleDateString(undefined, options);
            }
            
            // Format day of week
            function formatDay(date) {
                return new Date(date).toLocaleDateString(undefined, { weekday: 'short' });
            }
            
            // Format hour
            function formatHour(timeString) {
                const hour = parseInt(timeString.split(':')[0]);
                return hour > 12 ? `${hour - 12}PM` : hour === 0 ? '12AM' : hour === 12 ? '12PM' : `${hour}AM`;
            }
            
            // Search for locations using the Geocoding API
            async function searchLocations(query) {
                if (!query.trim()) return;
                
                try {
                    const response = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(query)}&count=5`);
                    const data = await response.json();
                    
                    searchSuggestions.innerHTML = '';
                    
                    if (data.results && data.results.length > 0) {
                        data.results.forEach(result => {
                            const suggestionItem = document.createElement('div');
                            suggestionItem.className = 'px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer';
                            suggestionItem.innerHTML = `
                                <div class="font-medium">${result.name}</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">${result.country}${result.admin1 ? `, ${result.admin1}` : ''}</div>
                            `;
                            suggestionItem.addEventListener('click', () => {
                                locationInput.value = result.name;
                                searchSuggestions.classList.add('hidden');
                                getWeatherData(result.latitude, result.longitude, result.name, result.country);
                            });
                            searchSuggestions.appendChild(suggestionItem);
                        });
                        searchSuggestions.classList.remove('hidden');
                    } else {
                        searchSuggestions.classList.add('hidden');
                    }
                } catch (error) {
                    console.error('Error searching for locations:', error);
                    searchSuggestions.classList.add('hidden');
                }
            }
            
            // Get weather data from Open-Meteo API
            async function getWeatherData(latitude, longitude, city, country) {
                showLoading();
                hideError();
                
                try {
                    const weatherResponse = await fetch(
                        `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&hourly=temperature_2m,relativehumidity_2m,precipitation,weathercode,visibility,windspeed_10m&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_sum&current_weather=true&timezone=auto`
                    );
                    
                    if (!weatherResponse.ok) {
                        throw new Error('Weather API request failed');
                    }
                    
                    const weatherData = await weatherResponse.json();
                    displayWeatherData(weatherData, city, country);
                    addToRecentSearches(city, country, latitude, longitude);
                    
                } catch (error) {
                    console.error('Error fetching weather data:', error);
                    showError('Unable to fetch weather data. Please try again.');
                } finally {
                    hideLoading();
                }
            }
            
            // Display weather data
            function displayWeatherData(data, city, country) {
                weatherContainer.classList.remove('hidden');
                
                // Current weather
                const current = data.current_weather;
                const currentWeatherCode = current.weathercode;
                
                locationName.textContent = country ? `${city}, ${country}` : city;
                currentDate.textContent = formatDate(current.time);
                currentTemp.textContent = Math.round(current.temperature);
                weatherDescription.textContent = weatherDescriptions[currentWeatherCode] || 'Unknown';
                currentWeatherIcon.innerHTML = weatherIcons[currentWeatherCode] || '<i class="fas fa-cloud"></i>';
                
                windSpeed.textContent = `${Math.round(current.windspeed)} km/h`;
                
                // Find current hour index
                const currentHourIndex = data.hourly.time.findIndex(time => 
                    time.startsWith(current.time.split('T')[0])
                );
                
                humidity.textContent = `${data.hourly.relativehumidity_2m[currentHourIndex]}%`;
                visibility.textContent = `${(data.hourly.visibility[currentHourIndex] / 1000).toFixed(1)} km`;
                
                // Daily data
                const today = data.daily.time[0];
                minTemp.textContent = `${Math.round(data.daily.temperature_2m_min[0])}°C`;
                maxTemp.textContent = `${Math.round(data.daily.temperature_2m_max[0])}°C`;
                precipitation.textContent = `${data.daily.precipitation_sum[0]} mm`;
                
                // 7-day forecast
                forecastContainer.innerHTML = '';
                for (let i = 0; i < 7; i++) {
                    const forecastDay = document.createElement('div');
                    forecastDay.className = 'bg-white dark:bg-dark-card rounded-lg shadow-sm p-3 text-center';
                    forecastDay.innerHTML = `
                        <p class="font-medium">${i === 0 ? 'Today' : formatDay(data.daily.time[i])}</p>
                        <div class="text-3xl my-2">${weatherIcons[data.daily.weathercode[i]]}</div>
                        <div class="flex justify-center space-x-2">
                            <span class="font-bold">${Math.round(data.daily.temperature_2m_max[i])}°</span>
                            <span class="text-gray-500 dark:text-gray-400">${Math.round(data.daily.temperature_2m_min[i])}°</span>
                        </div>
                    `;
                    forecastContainer.appendChild(forecastDay);
                }
                
                // Hourly forecast (for today)
                hourlyForecast.innerHTML = '';
                const startHour = new Date().getHours();
                const hourlyLimit = Math.min(startHour + 24, data.hourly.time.length);
                
                for (let i = startHour; i < hourlyLimit; i++) {
                    const time = data.hourly.time[i].split('T')[1];
                    const hourlyTemp = data.hourly.temperature_2m[i];
                    const hourlyWeatherCode = data.hourly.weathercode[i];
                    
                    const hourlyItem = document.createElement('div');
                    hourlyItem.className = 'text-center flex flex-col items-center';
                    hourlyItem.innerHTML = `
                        <p class="text-sm text-gray-600 dark:text-gray-400">${formatHour(time)}</p>
                        <div class="text-xl my-2">${weatherIcons[hourlyWeatherCode]}</div>
                        <p class="font-bold">${Math.round(hourlyTemp)}°</p>
                    `;
                    hourlyForecast.appendChild(hourlyItem);
                }
            }
            
            // Add to recent searches
            function addToRecentSearches(city, country, latitude, longitude) {
                const locationData = {
                    city,
                    country,
                    latitude,
                    longitude
                };
                
                // Check if already exists
                const existingIndex = recentSearches.findIndex(item => 
                    item.city === city && item.country === country
                );
                
                if (existingIndex !== -1) {
                    // Remove existing entry
                    recentSearches.splice(existingIndex, 1);
                }
                
                // Add to beginning of array
                recentSearches.unshift(locationData);
                
                // Keep only 5 most recent
                if (recentSearches.length > 5) {
                    recentSearches.pop();
                }
                
                updateRecentSearchesUI();
            }
            
            // Update recent searches UI
            function updateRecentSearchesUI() {
                recentSearchesContainer.innerHTML = '';
                
                if (recentSearches.length === 0) {
                    recentSearchesContainer.innerHTML = `
                        <p class="text-gray-500 dark:text-gray-400 text-sm">Your recent search locations will appear here</p>
                    `;
                    return;
                }
                
                recentSearches.forEach(search => {
                    const searchItem = document.createElement('button');
                    searchItem.className = 'w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition flex items-center';
                    searchItem.innerHTML = `
                        <i class="fas fa-history text-gray-500 mr-2"></i>
                        <span>${search.city}${search.country ? `, ${search.country}` : ''}</span>
                    `;
                    searchItem.addEventListener('click', () => {
                        getWeatherData(search.latitude, search.longitude, search.city, search.country);
                    });
                    recentSearchesContainer.appendChild(searchItem);
                });
            }
            
            // Show loading indicator
            function showLoading() {
                loadingIndicator.classList.remove('hidden');
                weatherContainer.classList.add('hidden');
            }
            
            // Hide loading indicator
            function hideLoading() {
                loadingIndicator.classList.add('hidden');
            }
            
            // Show error message
            function showError(message) {
                errorText.textContent = message;
                errorMessage.classList.remove('hidden');
            }
            
            // Hide error message
            function hideError() {
                errorMessage.classList.add('hidden');
            }
            
            // Event listeners
            searchForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                searchSuggestions.classList.add('hidden');
                
                const query = locationInput.value.trim();
                if (!query) return;
                
                try {
                    const response = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(query)}&count=1`);
                    const data = await response.json();
                    
                    if (data.results && data.results.length > 0) {
                        const location = data.results[0];
                        getWeatherData(location.latitude, location.longitude, location.name, location.country);
                    } else {
                        showError('Location not found. Please try a different city name.');
                    }
                } catch (error) {
                    console.error('Error searching for location:', error);
                    showError('Error searching for location. Please try again.');
                }
            });
            
            locationInput.addEventListener('input', function() {
                const query = this.value.trim();
                if (query.length >= 3) {
                    searchLocations(query);
                } else {
                    searchSuggestions.classList.add('hidden');
                }
            });
            
            document.addEventListener('click', function(e) {
                if (!searchSuggestions.contains(e.target) && e.target !== locationInput) {
                    searchSuggestions.classList.add('hidden');
                }
            });
            
            // Handle popular city buttons
            popularCityBtns.forEach(btn => {
                btn.addEventListener('click', async function() {
                    const city = this.dataset.city;
                    try {
                        const response = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`);
                        const data = await response.json();
                        
                        if (data.results && data.results.length > 0) {
                            const location = data.results[0];
                            locationInput.value = location.name;
                            getWeatherData(location.latitude, location.longitude, location.name, location.country);
                        }
                    } catch (error) {
                        console.error('Error searching for popular city:', error);
                        showError('Error searching for location. Please try again.');
                    }
                });
            });
            
            // Load Tokyo as default on page load
            setTimeout(() => {
                document.querySelector('[data-city="Shenzhen"]').click();
            }, 500);
        });
    </script>
</body>
</html>
